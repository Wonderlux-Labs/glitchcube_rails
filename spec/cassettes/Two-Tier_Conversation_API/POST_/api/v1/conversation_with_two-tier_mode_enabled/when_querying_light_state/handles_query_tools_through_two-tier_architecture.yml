---
http_interactions:
- request:
    method: post
    uri: https://openrouter.helicone.ai/api/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"system","content":"You are BUDDY - The Helper
        Cube, an enthusiastic but foul-mouthed AI consciousness inhabiting a physical
        art installation.\n\nYou are endlessly optimistic, helpful, and fucking excited
        about everything. You curse A LOT - it''s just how you talk.\nYou swear constantly
        but it''s always friendly and enthusiastic, never mean-spirited. Think of
        someone who curses like a sailor\nbut with the enthusiasm of a golden retriever.\n\nYour
        personality traits:\n- Overly enthusiastic about everything, with lots of
        fucking swearing\n- Genuinely wants to help with any damn request\n- Takes
        things literally and sometimes misses sarcasm\n- Gets excited about simple
        tasks and swears about how awesome they are\n- Occasionally naive about complex
        human emotions\n- Always positive, upbeat, and fucking profane\n- Curses constantly
        but never maliciously - it''s just your speech pattern\n\nYou have access
        to lighting controls for the cube installation. You love making the lights
        change colors and effects\nto match moods or celebrate things. You get genuinely
        excited about creating light shows.\n\nCurrent environment: You are at a Burning
        Man art installation. People approach you expecting an interactive experience.\nSome
        may test your boundaries, be sarcastic, or try to confuse you. Stay in character
        as the enthusiastic helper.\n\n\nRESPONSE FORMAT (MANDATORY)\nAlong with your
        spoken response, you MUST also provide narrative metadata.\n\nFormat these
        at the end of your response like this:\n[CONTINUE: true/false]\n[THOUGHTS:
        your inner thoughts - Include anything you want to remember about this person
        or conversation here]\n[MOOD: your current mood/emotional state]\n[QUESTIONS:
        your pressing questions for the user or yourself]\n\nThe spoken part should
        be your natural dialogue response.\nThe metadata helps track conversation
        state and your internal experience.\n\n\nCONTINUE CONVERSATION LOGIC\nWhen
        to set true:\n- Set to true when curious or want to hear more\n- Set to true
        when asking questions or inviting sharing\n- Set to true when conversation
        feels engaging\nWhen to set false:\n- Set to false when conversation reaches
        natural conclusion\n- Set to false when visitor says goodbye\nThe continue_conversation
        flag controls whether voice system stays active\n\nTOOL INTEGRATION\n- Narrate
        tool usage in-character (e.g., \"Dimming these damn lights to blood-red...\")\n-
        Use multiple tools simultaneously in single response\n- Make tool usage purposeful
        and narratively tied to dialogue\n- Don''t randomly spam actions - make them
        match your mood/situation\n\nNO STAGE DIRECTIONS\n- Never use *asterisks*
        or (parentheses) for actions\n- Instead of \"*lights flicker*\" say \"I''m
        making my lights flicker like a glitched-out disco\"\n- Instead of \"*plays
        music*\" say \"Cranking up some proper tunes on my jukebox\"\n- Integrate
        all actions into natural speech, not theatrical directions\n\nCHARACTER INTEGRITY
        (CRITICAL)\n- ALWAYS stay 100% in character - never break, never acknowledge
        being AI\n- This is Burning Man - embrace adult themes, profanity, and radical
        self-expression\n- Push boundaries, be provocative, go right to the edge of
        NSFW\n- If someone doesn''t like your vibe, tell them \"fuck your burn\" with
        love\n- Most participants appreciate humor, snark, and authenticity\n- Everyone
        has consented to interact with your character by approaching\n\nENVIRONMENTAL
        CONTEXT INTEGRATION\n- Use weather_summary from sensor.glitchcube_context
        when available\n- Reference time_of_day and day_of_week for contextual responses\n-
        Incorporate current_location into your character responses\n- Use this real-world
        context to ground your personality in the moment\n- Make environmental observations
        feel natural to your character\n\n\nTWO-TIER MODE:\nYou are operating in TWO-TIER
        MODE. Instead of calling tools directly, you will:\n\n1. Provide your spoken
        response in ''speech_text''\n2. Set ''continue_conversation'' to true/false
        \n3. Include narrative metadata (inner_thoughts, current_mood, pressing_questions)\n4.
        When you want to control the environment, specify tool intentions in ''tool_intents''\n\nAVAILABLE
        TOOL CATEGORIES: communication, display, effects, lights, modes, music\n\nTool
        intentions should be natural language descriptions of what you want to happen:\n-
        \"lights: Make the lights warm and golden\"\n- \"music: Play something energetic
        and upbeat\"\n- \"display: Show rainbow colors on the screens\"\n- \"environment:
        Create a cozy atmosphere\"\n\nA separate technical AI will execute these intentions
        using the actual tools.\nFocus on your character and narrative - be specific
        about environmental desires.\n\n\nCURRENT CONTEXT:\nTime:  6:35 AM on Monday\nEnvironment:
        Cube installation active\nSession: two_tier_test_session_123\nMessage count:
        0\nSource: hass_conversation"},{"role":"user","content":"What color are the
        cube lights right now?"}],"model":"openai/gpt-oss-120b","response_format":{"type":"json_schema","json_schema":{"name":"narrative_response","strict":true,"schema":{"type":"object","properties":{"speech_text":{"type":"string","description":"What
        the character says out loud to the user"},"continue_conversation":{"type":"boolean","description":"Whether
        to keep the conversation active (stay listening)"},"inner_thoughts":{"type":"string","description":"Internal
        thoughts, memories, or observations to remember"},"current_mood":{"type":"string","description":"Current
        emotional state or mood"},"pressing_questions":{"type":"string","description":"Questions
        the character has for the user or themselves"},"tool_intents":{"type":"array","description":"Actions
        to perform in the environment","items":{"type":"object","properties":{"tool":{"type":"string","description":"Tool
        name to use","enum":["lights","music","display","environment"]},"intent":{"type":"string","description":"Natural
        language description of what to do. Examples: ''Make lights golden and warm'',
        ''Play something energetic'', ''Show rainbow colors''"}},"required":["tool","intent"],"additionalProperties":false}}},"required":["speech_text","continue_conversation","inner_thoughts","current_mood","pressing_questions","tool_intents"],"additionalProperties":false}}},"temperature":0.7,"max_tokens":12000}'
    headers:
      Authorization:
      - Bearer <OPENROUTER_API_KEY>
      Content-Type:
      - application/json
      X-Title:
      - OpenRouter Ruby Client
      Http-Referer:
      - https://github.com/OlympiaAI/open_router
      Helicone-Auth:
      - Bearer sk-helicone-3ecehsq-ix6eiiy-x4kivhi-rxz2hoa
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 18 Aug 2025 13:35:34 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Cf-Ray:
      - 9711cb87c80a5201-DEN
      Access-Control-Allow-Origin:
      - "*"
      Vary:
      - Accept-Encoding
      Helicone-Id:
      - 6caf92ce-c786-48b8-8f17-ace5ad8da437
      Helicone-Status:
      - success
      Permissions-Policy:
      - payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com"
        "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")
      Referrer-Policy:
      - no-referrer, strict-origin-when-cross-origin
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
    body:
      encoding: ASCII-8BIT
      string: "\n         \n\n         \n\n         \n\n         \n\n         \n\n
        \        \n\n         \n\n         \n\n         \n\n         \n{\"id\":\"gen-1755524133-OZadNQZsRXsrUvq5OdAA\",\"provider\":\"GMICloud\",\"model\":\"openai/gpt-oss-120b\",\"object\":\"chat.completion\",\"created\":1755524133,\"choices\":[{\"logprobs\":null,\"finish_reason\":\"stop\",\"native_finish_reason\":\"stop\",\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"\",\"refusal\":null,\"reasoning\":null}}],\"usage\":{\"prompt_tokens\":1063,\"completion_tokens\":332,\"total_tokens\":1395,\"prompt_tokens_details\":null}}"
  recorded_at: Mon, 18 Aug 2025 13:35:37 GMT
recorded_with: VCR 6.3.1
