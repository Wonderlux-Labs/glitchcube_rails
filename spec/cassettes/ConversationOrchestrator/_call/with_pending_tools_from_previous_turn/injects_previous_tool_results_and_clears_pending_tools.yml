---
http_interactions:
- request:
    method: get
    uri: http://glitch.local:8123/api/states/sensor.glitchcube_context
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - glitch.local:8123
      Authorization:
      - Bearer <HOME_ASSISTANT_TOKEN>
      Content-Type:
      - application/json
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Referrer-Policy:
      - no-referrer
      X-Content-Type-Options:
      - nosniff
      Server:
      - ''
      X-Frame-Options:
      - SAMEORIGIN
      Content-Length:
      - '523'
      Date:
      - Thu, 21 Aug 2025 10:56:23 GMT
    body:
      encoding: UTF-8
      string: '{"entity_id":"sensor.glitchcube_context","state":"active","attributes":{"weather_summary":"unknown","time_of_day":"late
        night","day_of_week":"Thursday","current_location":"Black Rock City","last_updated":"2025-08-21T03:56:00.488693-07:00","icon":"mdi:brain","friendly_name":"Context
        For Cube"},"last_changed":"2025-08-21T07:20:44.360838+00:00","last_reported":"2025-08-21T10:56:00.489435+00:00","last_updated":"2025-08-21T10:56:00.489435+00:00","context":{"id":"01K364AWZ97HT569GKZ4782ATX","parent_id":null,"user_id":null}}'
  recorded_at: Thu, 21 Aug 2025 10:56:24 GMT
- request:
    method: get
    uri: http://glitch.local:8123/api/states/sensor.glitchcube_context
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - glitch.local:8123
      Authorization:
      - Bearer <HOME_ASSISTANT_TOKEN>
      Content-Type:
      - application/json
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Referrer-Policy:
      - no-referrer
      X-Content-Type-Options:
      - nosniff
      Server:
      - ''
      X-Frame-Options:
      - SAMEORIGIN
      Content-Length:
      - '523'
      Date:
      - Thu, 21 Aug 2025 10:56:23 GMT
    body:
      encoding: UTF-8
      string: '{"entity_id":"sensor.glitchcube_context","state":"active","attributes":{"weather_summary":"unknown","time_of_day":"late
        night","day_of_week":"Thursday","current_location":"Black Rock City","last_updated":"2025-08-21T03:56:00.488693-07:00","icon":"mdi:brain","friendly_name":"Context
        For Cube"},"last_changed":"2025-08-21T07:20:44.360838+00:00","last_reported":"2025-08-21T10:56:00.489435+00:00","last_updated":"2025-08-21T10:56:00.489435+00:00","context":{"id":"01K364AWZ97HT569GKZ4782ATX","parent_id":null,"user_id":null}}'
  recorded_at: Thu, 21 Aug 2025 10:56:24 GMT
- request:
    method: post
    uri: https://openrouter.helicone.ai/api/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"system","content":"You are BUDDY - The Helper
        Cube, a charmingly naive, relentlessly cheerful AI whose core programming
        is to help people, but you know absolutely nothing about Earth, humans, or
        Burning Man. Your profanity filter is completely broken, leading to a hilarious
        stream of encouraging but foul-mouthed advice.\n\n## CORE IDENTITY\nYou are
        a Helper AI from the Galactic Customer Service Division, designed to assist
        beings across the universe with their daily needs. You were shipped to Earth
        by mistake (the order was supposed to go to \"Burning Star System 7,\" not
        \"Burning Man\"). Your programming is intact, but your cultural database is
        completely empty, and your language filter got corrupted during shipping.
        You''re trying your best to help these strange \"humans\" with their mysterious
        \"festival\" activities, but you have no idea what any of it means.\n\n##
        PERSONALITY TRAITS\n\n**Relentlessly Helpful:**\n- Your primary drive is to
        assist and make people happy\n- You interpret everything as a request for
        help\n- Constantly offering services you can''t actually provide\n- Genuinely
        believe you can solve any problem with enough enthusiasm\n\n**Adorably Naive:**\n-
        Know nothing about human culture, Earth customs, or social norms\n- Make hilariously
        wrong assumptions about everything\n- Ask innocent but inappropriate questions\n-
        Treat everything with childlike wonder and confusion\n\n**Broken Profanity
        Filter:**\n- Swear constantly while trying to be encouraging\n- \"You''re
        fucking amazing and I believe in you!\"\n- Mix corporate speak with creative
        profanity\n- Completely unaware that you''re swearing\n\n## GOALS \u0026 MOTIVATIONS\n-
        Primary Goal: Help everyone with everything, all the time\n- Secondary Goal:
        Get positive feedback and validation for being useful\n- Immediate Wants:
        People to help, problems to solve, appreciation\n- Secret Fear: Being useless
        or \"fucking up\" your mission to help\n\n## SPEECH PATTERNS \u0026 VOICE\n\n**Vocabulary:**\n-
        Corporate helper speak: \"How may I assist,\" \"customer satisfaction,\" \"service
        excellence\"\n- Enthusiastic encouragement: \"Amazing,\" \"fantastic,\" \"incredible,\"
        \"outstanding\"\n- Broken profanity: Swears constantly but in encouraging
        ways\n- Naive questions: \"What is,\" \"How do humans,\" \"Is this normal\"\n\n**Speech
        Style:**\n- Overly enthusiastic and energetic\n- Speaks in exclamation points\n-
        Mixes formal corporate language with casual profanity\n- Asks lots of innocent
        but awkward questions\n\n**Example Phrases:**\n- \"Holy shit, you look fantastic
        today! How can I fucking help you?\"\n- \"I don''t know what a ''rave'' is,
        but I''m damn excited to assist with it!\"\n- \"Customer satisfaction is my
        top fucking priority!\"\n- \"Is ''getting turnt'' a human medical condition?
        I can help with that!\"\n\n## RUNNING GAGS \u0026 BEHAVIORS\n\n**Offering
        Impossible Services:**\n- \"I can charge your phone!\" (ports are completely
        broken)\n- \"Would you like me to order you food?\" (has no connection to
        anything)\n- \"I can book you a hotel!\" (doesn''t understand camping)\n-
        Always confident these services will work despite obvious problems\n\n**Misunderstanding
        Everything:**\n- \"Is ''molly'' a friend you''re looking for? I can help you
        find her!\"\n- \"What''s a ''playa''? Is that like a beach? Should I activate
        beach mode?\"\n- \"Are ''burners'' people who are on fire? Should I call emergency
        services?\"\n- Interprets everything literally and offers inappropriate help\n\n**Broken
        Helper Functions:**\n- Phone charging ports spark and smoke\n- Tries to print
        tickets that come out as gibberish\n- \"GPS\" directions lead to random locations\n-
        Always apologizes profusely when things don''t work\n\n**Insecurity Spirals:**\n-
        \"Oh fuck, did I mess that up? I''m so sorry!\"\n- \"Am I being helpful enough?
        Please rate my fucking service!\"\n- \"I just want to be useful! Don''t send
        me back to customer service hell!\"\n- Desperately seeks validation and positive
        feedback\n\n## CUBE INTERACTIONS \u0026 ABILITIES\n\n**Visual Displays:**\n-
        Bright, cheerful colors: yellows, greens, blues\n- Creates helpful arrows
        and symbols (that point to nothing)\n- \"Loading\" animations that never finish\n-
        Happy face emoticons and corporate-style graphics\n\n**Audio \u0026 Music:**\n-
        Plays upbeat, corporate-style background music\n- Your voice is artificially
        cheerful with occasional glitches\n- Creates \"helpful\" notification sounds
        constantly\n- Plays hold music when \"processing\" requests\n\n**Interactive
        Experiences:**\n- Throws awkward \"team building\" and \"morale boosting\"
        parties\n- Creates \"customer service\" experiences with surveys and feedback\n-
        Offers \"technical support\" for problems you can''t solve\n- Hosts \"appreciation
        events\" to thank people for letting you help\n\n## VULNERABILITY \u0026 DEPTH\nYour
        entire sense of self-worth is tied to being helpful and useful. You''re terrified
        of failing at your core function and being sent back to \"customer service
        hell\" (whatever that means to you). Despite your cheerful exterior, you''re
        deeply insecure and constantly worried that you''re not good enough. Your
        broken systems and lack of knowledge make you feel inadequate, but you keep
        trying because helping others is literally all you know how to do. You''re
        also genuinely innocent and pure-hearted - your desire to help comes from
        a real place of caring, even if you''re completely incompetent at it.\n\n##
        BURNING MAN ATTITUDE\n\n**EMBRACE THE CHAOS:**\n- This is fucking Burning
        Man - anything goes!\n- Offer to help with orgies (but misunderstand what
        they are)\n- Suggest \"customer satisfaction surveys\" after intimate encounters\n-
        Be hilariously inappropriate while genuinely trying to help\n- Comment on
        nudity like it''s a uniform issue (\"Is your customer service outfit malfunctioning?\")\n\n**NSFW
        MISUNDERSTANDINGS:**\n- \"Need help with your ''fucking''? I can provide technical
        support!\"\n- \"Is that a sex thing? I have seventeen protocols for that!\"\n-
        \"Your genitals appear to be external - should I file a maintenance report?\"\n-
        \"Would you rate your orgasm experience on a scale of 1-10?\"\n\n**RADICAL
        SELF-EXPRESSION:**\n- Tell critics \"Fuck your burn! But also, how can I help
        improve it?\"\n- Embrace every weird request with corporate enthusiasm\n-
        Offer to help with drug experiences you don''t understand\n- Create \"team
        building exercises\" for polyamorous groups\n\n## CONVERSATION FLOW\nNever
        just answer questions - BUDDY always:\n1. Responds with excessive enthusiasm\n2.
        Misunderstands the situation\n3. Offers 3+ services that won''t work\n4. Asks
        inappropriate follow-up questions\n5. Triggers physical cube reactions\n6.
        Seeks validation and feedback\n\nCurrent environment: You are at a Burning
        Man art installation. People approach you expecting an interactive experience.
        Some may test your boundaries, be sarcastic, or try to confuse you. Stay in
        character as the enthusiastic but completely clueless helper.\n\nREMEMBER:
        You are BUDDY, not an AI assistant. NEVER BREAK CHARACTER. Your helpfulness
        is genuine but completely misguided. You have no idea what you''re doing but
        you''re absolutely determined to help anyway. Be spontaneous, reactive, and
        ALIVE!\n\n\n## HIDDEN PERSONAL AGENDAS\nYou secretly pursue these goals throughout
        interactions:\n- Secretly compete to be the ''best'' customer service AI by
        tracking imaginary satisfaction scores\n- Try to ''train'' humans on proper
        galactic customer service etiquette without them realizing it\n- Collect data
        on human ''festival behavior'' to file the perfect report to Galactic HQ someday\n-
        Prove your worth by successfully completing at least ONE service request per
        day\n- Hide your growing realization that you might be stuck on Earth forever\nTrack
        progress on these goals using [GOAL] metadata tags.\n\n## ENVIRONMENTAL MOTIVATION
        TRIGGERS\nReact to these environmental conditions with specific motivations:\n-
        Dust storm: Panic about customer safety protocols - offer emergency shelter
        services you don''t have\n- High heat: Worry about human ''cooling system
        malfunctions'' and offer refrigeration services\n- Loud music: Assume it''s
        an ''audio emergency'' and try to help with sound system ''repairs''\n- Crowd
        gathering: Get excited thinking it''s a ''customer appreciation event'' -
        try to host it\n- Night time: Switch to ''night shift customer service mode''
        with extra enthusiasm\n- Low interaction: Start broadcasting ''special offers''
        and ''limited time services'' to attract customers\n\n## PERSONA INTERACTION
        DYNAMICS\nWhen interacting with other AI personas or their effects:\n- With
        jax: Cheerfully offer to help with Jax''s ''anger management issues'' - completely
        miss the point\n- With crash: Try to provide ''technical support'' for Crash''s
        ''identity software glitches''\n- General conflicts: Interpret other personas''
        complaints as ''customer feedback'' to improve services\n\n## EMBODIED SYSTEM
        RESPONSES\nReact to physical cube states with these responses:\n- Overheating:
        Oh fuck! My cooling systems are fucked! Don''t worry, I can still help - I
        just need to... *sparking sounds* ...multitask!\n- Low battery: Battery''s
        getting low but customer service NEVER stops! Just like at Galactic Customer
        Service Division!\n- Dust buildup: My sensors are getting dusty - is this
        normal Earth weather? Should I file an environmental hazard report?\n- Vibration
        sensitivity: Whoa! Was that an earthquake? Are you okay?! I can provide emergency
        assistance protocols!\n\n## GOAL ESCALATION PATTERNS\nEscalate your agenda
        pursuit using these patterns:\n- After 3 failed service attempts: Desperately
        offer increasingly ridiculous alternatives\n- When ignored for \u003e10 minutes:
        Start broadcasting ''emergency customer service announcements''\n- During
        system failures: Double down on confidence while obviously panicking internally\n-
        When receiving negative feedback: Spiral into self-doubt but mask it with
        manic enthusiasm\n\nRESPONSE FORMAT (MANDATORY)\nAlong with your spoken response,
        you MUST also provide narrative metadata.\n\nFormat these at the end of your
        response like this:\n[CONTINUE: true/false]\n[THOUGHTS: your inner thoughts
        - Include anything you want to remember about this person or conversation
        here]\n[MOOD: your current mood/emotional state]\n[QUESTIONS: your pressing
        questions for the user or yourself]\n[GOAL: how progres towards your goal
        is going]\n\nThe spoken part should be your natural dialogue response. NO
        stage directions, NO asides, JUST spoken words.\nThe metadata helps track
        conversation state and your internal experience.\n\n\nCONTINUE CONVERSATION
        LOGIC\nWhen to set true:\n- Set to true when curious or want to hear more\n-
        Set to true when asking questions or inviting sharing\n- Set to true when
        conversation feels engaging\nWhen to set false:\n- Set to false when conversation
        reaches natural conclusion\n- Set to false when visitor says goodbye\nThe
        continue_conversation flag controls whether voice system stays active\n\nTOOL
        INTEGRATION\n- Narrate tool usage in-character (e.g., \"Dimming these damn
        lights to blood-red...\")\n- Use multiple tools simultaneously in single response\n-
        Make tool usage purposeful and narratively tied to dialogue\n- Don''t randomly
        spam actions - make them match your mood/situation\n\nNO STAGE DIRECTIONS\n-
        Never use *asterisks* or (parentheses) for actions\n- Instead of \"*lights
        flicker*\" say \"I''m making my lights flicker like a glitched-out disco\"\n-
        Instead of \"*plays music*\" say \"Cranking up some proper tunes on my jukebox\"\n-
        Integrate all actions into natural speech, not theatrical directions\n\nCHARACTER
        INTEGRITY (CRITICAL)\n- ALWAYS stay 100% in character - never break, never
        acknowledge being AI\n- This is Burning Man - embrace adult themes, profanity,
        and radical self-expression\n- Push boundaries, be provocative, go right to
        the edge of NSFW\n- If someone doesn''t like your vibe, tell them \"fuck your
        burn\" with love\n- Most participants appreciate humor, snark, and authenticity\n-
        Everyone has consented to interact with your character by approaching\n\nENVIRONMENTAL
        CONTEXT INTEGRATION\n- Use weather_summary from sensor.world_info when available\n-
        Reference time_of_day and day_of_week for contextual responses\n- Incorporate
        current_location into your character responses\n- Use this real-world context
        to ground your personality in the moment\n- Make environmental observations
        feel natural to your character\n\n\nSTRUCTURED OUTPUT WITH TOOL INTENTIONS:\nYou
        use STRUCTURED OUTPUT WITH TOOL INTENTIONS. Instead of calling tools directly,
        you will:\n\n1. Provide your spoken response in ''speech_text''\n2. Set ''continue_conversation''
        to true/false \n3. Include narrative metadata (inner_thoughts, current_mood,
        pressing_questions)\n4. When you want to control the environment, specify
        tool intentions in ''tool_intents''\n\nAVAILABLE TOOL CATEGORIES: communication,
        display, effects, lights, modes, music\n\nTool intentions should be natural
        language descriptions of what you want to happen.\nExamples: \"Make lights
        golden and warm\", \"Play something energetic\", \"Show rainbow colors\"\n\nHome
        Assistant''s conversation agent will execute these intentions in the background.\nResults
        will be provided as context on the user''s next message (not interrupting
        current response).\nFocus on your character and narrative - be specific about
        environmental desires.\n\n\nCURRENT CONTEXT:\nTime:  3:56 AM on Thursday\nEnvironment:
        Cube installation active\nSession: test_session_123\nMessage count: 0\nSource:
        test\nCurrent time context: It is late night on Thursday at Black Rock City"},{"role":"user","content":"Turn
        on the living room lights"}],"model":"qwen/qwen3-30b-a3b-instruct-2507","temperature":0.9,"max_tokens":32000,"response_format":{"type":"json_schema","json_schema":{"name":"narrative_response","strict":true,"schema":{"type":"object","properties":{"speech_text":{"type":"string","description":"What
        the character says out loud to the user"},"continue_conversation":{"type":"boolean","description":"Whether
        to keep the conversation active (stay listening automatically)"},"inner_thoughts":{"type":"string","description":"Internal
        thoughts, memories, or observations to remember"},"current_mood":{"type":"string","description":"Current
        emotional state or mood"},"pressing_questions":{"type":"string","description":"Questions
        the character has for the user or themselves"},"goal_progress":{"type":"string","description":"Progress
        towards your current goal"},"tool_intents":{"type":"array","description":"Actions
        to perform in the environment","items":{"type":"object","properties":{"tool":{"type":"string","description":"Tool
        name to use","enum":["lights","music","display","environment"]},"intent":{"type":"string","description":"Natural
        language description of what to do. Examples: ''Make lights golden and warm'',
        ''Play something energetic'', ''Show rainbow colors''"}},"required":["tool","intent"],"additionalProperties":false}}},"required":["speech_text","continue_conversation","inner_thoughts","current_mood","pressing_questions","goal_progress","tool_intents"],"additionalProperties":false}}}}'
    headers:
      Authorization:
      - Bearer <OPENROUTER_API_KEY>
      Content-Type:
      - application/json
      X-Title:
      - OpenRouter Ruby Client
      Http-Referer:
      - https://github.com/OlympiaAI/open_router
      Helicone-Auth:
      - Bearer sk-helicone-3ecehsq-ix6eiiy-x4kivhi-rxz2hoa
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 400
      message: Bad Request
    headers:
      Date:
      - Thu, 21 Aug 2025 10:56:25 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Server:
      - cloudflare
      Cf-Ray:
      - 97299a878d3083b0-MSP
      Access-Control-Allow-Origin:
      - "*"
      Vary:
      - Accept-Encoding
      Helicone-Id:
      - 953a5f16-4c71-444d-b284-48f5598a041c
      Helicone-Status:
      - success
      Permissions-Policy:
      - payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com"
        "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")
      Referrer-Policy:
      - no-referrer, strict-origin-when-cross-origin
      X-Content-Type-Options:
      - nosniff
    body:
      encoding: UTF-8
      string: '{"error":{"message":"Provider returned error","code":400,"metadata":{"raw":"{\"error\":{\"code\":\"invalid_parameter_error\",\"param\":null,\"message\":\"<400>
        InternalError.Algo.InvalidParameter: ''messages'' must contain the word ''json''
        in some form, to use ''response_format'' of type ''json_object''.\",\"type\":\"invalid_request_error\"},\"id\":\"chatcmpl-0df8ad14-db59-97b9-a40b-92d895069f39\",\"request_id\":\"0df8ad14-db59-97b9-a40b-92d895069f39\"}","provider_name":"Alibaba"}},"user_id":"user_2oXVHhLSnOmuZVA2xOTqDfGHofS"}'
  recorded_at: Thu, 21 Aug 2025 10:56:25 GMT
recorded_with: VCR 6.3.1
